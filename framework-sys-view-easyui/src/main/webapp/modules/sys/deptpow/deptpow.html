<div class="easyui-layout" style="width:100%;height:100%;" id="deptpow_panel">

<table url="/system/unitinfo/subunits?struct=true&field=unitCode&field=unitWord&field=unitName&field=unitTypeText&field=children&field=unitDesc&field=isValid&field=parentUnitName"
	idField="unitCode" treeField="unitName"
	toolbar=".temp-toolbar" layoutH="0">
    <thead>
        <tr>
        	<th id="e@serialNumber" data-options="field:'unitCode'" hidden="true">编号</th>
            <th id="e@name" data-options="field:'unitName'" width="250">名称</th>
            <th id="e@encoding" data-options="field:'unitWord'" width="100" align="center">编码</th>
            <th id="e@classes" data-options="field:'unitTypeText'" width="100" align="center">类别</th>
            <th id="e@describe" data-options="field:'unitDesc'" width="300">描述</th>
        </tr>
    </thead>
</table>

<div class="temp-toolbar">
	

	<a iconCls="icon-add" href="modules/sys/deptpow/deptpow-info.html" trigger="single"
		target="dialog" rel="deptpow_add" title="新增 {{unitName}} 下级机构" width="640" height="500" btnValue="添加"><p  id="e@link.subOrganization">下级机构</p></a>
		
	<a iconCls="icon-edit" href="modules/sys/deptpow/deptpow-edit.html" trigger="single"
		target="dialog" rel="deptpow_edit" title="编辑 {{unitName}}" width="640" height="500" btnValue="更新"><p  id="e@link.edit">编辑</p></a>
		
	<hr>
	
	<a  iconCls="icon-base icon-base-user" href="modules/sys/deptpow/deptpow-user.html" trigger="single"
		target="dialog" rel="deptpow_user" title="编辑 {{unitName}} 机构人员" width="640" height="560" btnValue="更新"><p id="e@link.organizationPersonnel">机构人员</p></a>
		
	<hr>
	
	<a iconCls="icon-base icon-base-ban" trigger="single"
		target="confirm" rel="deptpow_remove" title="是否确定删除 {{unitName}}？"><p  id="e@btn.delete">删除</p></a>
</div>
</div>
<script>
	$.parser.onComplete = function(panel) {
		$.parser.onComplete = $.noop;
		
		requirejs([
					'core/filter/filter.dictionary',
		           'modules/sys/deptpow/ctrl/deptpow'
		          ], function(FilterDictionary, DeptPow) {
			
			FilterDictionary.add(['YesOrNo']).then(function() {
				new DeptPow('deptpow', panel).load(panel);
			});
		});
	};

</script>
<script>
setI18NText();
</script>